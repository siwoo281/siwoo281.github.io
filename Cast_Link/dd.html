<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cast-Link ëª¨í˜• (V3 - ì¹­ì°¬ ê°•ì¡°)</title>
    
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* 2. ëª¨í˜•(Mockup)ì„ ìœ„í•œ V3 ë””ìì¸ ì‹œìŠ¤í…œ */
        :root {
            --primary-color: #2563EB;
            --primary-light: #eff6ff;
            --accent-color: #FFC107; /* ì¹­ì°¬/ë³„ì  (ê³¨ë“œ) */
            --accent-light: #fffbeb;
            --danger-color: #dc3545;
            --app-bg: #f7f8fc;
            --card-bg: #ffffff;
            --text-color: #1f2937;
            --light-text-color: #6b7280;
            --border-color: #e5e7eb;
        }
        html { box-sizing: border-box; font-size: 16px; }
        *, *:before, *:after { box-sizing: inherit; }
        body {
            font-family: "Pretendard", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 1rem;
            line-height: 1.6;
            color: var(--text-color);
        }
        .mobile-mockup {
            width: 390px;
            height: 844px;
            background: var(--app-bg);
            border: 12px solid #111;
            border-radius: 44px;
            box-shadow: 0 20px 60px -10px rgba(0,0,0,0.4);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }
        .mobile-mockup::before {
            content: ''; position: absolute; top: 0; left: 50%;
            transform: translateX(-50%); width: 140px; height: 28px;
            background: #111; border-bottom-left-radius: 18px;
            border-bottom-right-radius: 18px; z-index: 10;
        }
        .app-header {
            padding: 1rem 1.25rem; padding-top: 3rem;
            background: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            z-index: 5;
        }
        .app-header h1 {
            font-size: 1.75rem; font-weight: 800;
            margin: 0; color: var(--text-color);
        }
        .app-content {
            flex-grow: 1; overflow-y: auto; padding: 1.25rem;
        }
        .page {
            display: none; animation: fadeIn 0.3s ease-in-out;
        }
        .page.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card {
            background: var(--card-bg); border-radius: 1rem;
            padding: 1.25rem; margin-bottom: 1.25rem;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.07);
            border: 1px solid var(--border-color);
        }
        .card-header {
            display: flex; align-items: center; font-size: 1.125rem;
            font-weight: 700; margin-bottom: 1rem; color: var(--text-color);
        }
        .card-header i {
            margin-right: 0.75rem; font-size: 1.2em;
            color: var(--primary-color); width: 24px; text-align: center;
        }
        .card p {
            margin-top: 0; margin-bottom: 0.5rem; color: var(--light-text-color);
        }
        .card-link {
            display: block; font-size: 0.95rem; font-weight: 600;
            color: var(--primary-color); text-decoration: none;
            margin-top: 1rem;
        }
        .card-link:hover { text-decoration: underline; }
        .btn {
            display: block; width: 100%; padding: 0.875rem 1rem;
            font-size: 1rem; font-weight: 600; color: #fff;
            background: var(--primary-color); border: none;
            border-radius: 0.75rem; text-align: center;
            text-decoration: none; box-sizing: border-box;
            margin-bottom: 0.75rem; cursor: pointer; transition: all 0.2s ease;
        }
        .btn:hover { opacity: 0.85; transform: translateY(-2px); }
        .btn-secondary {
            background: var(--primary-light); color: var(--primary-color);
        }
        .welcome-header {
            font-size: 1.25rem; font-weight: 600; margin-bottom: 0.25rem;
        }
        .welcome-sub {
            font-size: 0.95rem; color: var(--light-text-color);
            margin-bottom: 1.5rem;
        }
        .alert-card { border-left: 5px solid var(--danger-color); }
        .alert-card .card-header i { color: var(--danger-color); }

        /* ------------------------------------- */
        /* [V3] ì¹­ì°¬ ê°•ì¡° ìŠ¤íƒ€ì¼ */
        /* ------------------------------------- */

        /* í™ˆ: ì¹­ì°¬ ì¹´ë“œ (ê°€ì¥ ì¤‘ìš”) */
        .praise-card {
            background: var(--accent-light);
            border: 1px solid var(--accent-color);
            position: relative;
            overflow: hidden;
        }
        .praise-card .card-header i {
            color: var(--accent-color);
        }
        /* ì¹´ë“œ ìš°ì¸¡ ìƒë‹¨ ë°˜ì§ì„ ì•„ì´ì½˜ */
        .praise-card::after {
            content: '\f005'; /* ë³„ ì•„ì´ì½˜ */
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            position: absolute;
            top: 0.5rem;
            right: 1rem;
            font-size: 3rem;
            color: var(--accent-color);
            opacity: 0.15;
            transform: rotate(15deg);
        }
        .praise-card .highlight {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-color);
            line-height: 1.4;
        }
        .praise-card .highlight strong {
            color: #D97706; /* ì§™ì€ ë…¸ë€ìƒ‰ */
            font-size: 1.1em;
        }

        /* ì„±ì¥(Growth) íƒ­: ìŠ¤íƒ€ íŠ¸ë˜ì»¤ */
        .star-tracker {
            text-align: center;
            background: linear-gradient(135deg, #fffbeb 0%, #fff 100%);
            border: 1px solid var(--accent-color);
            padding-top: 2rem;
            padding-bottom: 2rem;
        }
        .star-tracker .star-level {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--text-color);
            margin-bottom: 0.5rem;
        }
        .star-tracker .stars {
            font-size: 2.25rem;
            color: var(--accent-color);
            margin-bottom: 1.25rem;
            letter-spacing: 0.25rem;
        }
        /* í”„ë¡œê·¸ë ˆìŠ¤ ë°” */
        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--border-color);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            overflow: hidden;
        }
        .progress-bar-inner {
            width: 60%; /* ì¹­ì°¬ 5ê°œ ì¤‘ 3ê°œ ë‹¬ì„± (ì˜ˆì‹œ) */
            height: 100%;
            background: var(--accent-color);
            border-radius: 10px;
        }
        .star-tracker .star-progress {
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--light-text-color);
        }
        .star-tracker .star-progress strong {
            color: var(--text-color);
        }

        /* ì„±ì¥(Growth) íƒ­: ì¹­ì°¬ ë¡œê·¸ (ë©”ì¼í•¨ ë””ìì¸) */
        .praise-log .card-header i {
            color: var(--primary-color);
        }
        .praise-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.25rem 0.5rem;
            border-bottom: 1px solid var(--border-color);
            transition: background 0.2s ease;
        }
        .praise-item:last-child { border-bottom: none; }
        .praise-item:hover { background: #f9fafb; }
        .praise-item .icon {
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .praise-item .icon.customer {
            background: var(--accent-light);
            color: var(--accent-color);
        }
        .praise-item .icon.colleague {
            background: var(--primary-light);
            color: var(--primary-color);
        }
        .praise-item .content {
            flex-grow: 1;
        }
        .praise-item .content .header {
            display: flex;
            justify-content: space-between;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.1rem;
        }
        .praise-item .content .header .name {
            color: var(--text-color);
        }
        .praise-item .content .header .date {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--light-text-color);
        }
        .praise-item .content .message {
            margin: 0;
            font-size: 0.95rem;
            color: var(--light-text-color);
            /* í•œ ì¤„ë§Œ ë³´ì´ê³  ë§ì¤„ì„í‘œ */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* ------------------------------------- */

        /* ìŠ¤ì¼€ì¤„ ë¦¬ìŠ¤íŠ¸ */
        .schedule-list { list-style: none; padding: 0; margin: 0; }
        .schedule-item {
            display: flex; align-items: center; padding: 1rem 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        .schedule-item:last-child { border-bottom: none; }
        .schedule-item .time {
            font-weight: 600; width: 5.5rem; color: var(--primary-color);
        }
        .schedule-item .task { font-weight: 500; flex-grow: 1; }
        .schedule-item .location { font-size: 0.9rem; color: var(--light-text-color); }
        .schedule-item .break { font-weight: 500; color: #10B981; }

        /* ë§¤ë‰´ì–¼ ê²€ìƒ‰ë°” */
        .search-bar {
            width: 100%; padding: 0.875rem 1rem; font-size: 1rem;
            border: 1px solid var(--border-color); border-radius: 0.75rem;
            margin-bottom: 1.25rem; box-sizing: border-box; background: var(--card-bg);
        }
        .search-bar::placeholder { color: #9ca3af; }
        .category-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;
        }
        .category-item {
            background: var(--primary-light); border-radius: 0.75rem;
            padding: 1.25rem 1rem; text-align: center;
            font-weight: 600; color: var(--primary-color);
            cursor: pointer; transition: all 0.2s ease;
        }
        .category-item:hover { background: var(--primary-color); color: var(--card-bg); }
        .category-item i {
            display: block; font-size: 1.5rem; margin-bottom: 0.5rem;
        }

        /* í•˜ë‹¨ íƒ­ ë‚´ë¹„ê²Œì´ì…˜ */
        .app-nav {
            display: flex; background: var(--card-bg);
            border-top: 1px solid var(--border-color);
            box-shadow: 0 -4px 12px rgba(0,0,0,0.05);
            padding-bottom: 1.5rem; padding-top: 0.5rem;
            position: relative; z-index: 5;
        }
        .app-nav a {
            flex: 1; padding: 0.5rem 0; text-align: center;
            color: var(--light-text-color); text-decoration: none;
            display: flex; flex-direction: column; align-items: center;
            gap: 4px; font-size: 0.75rem; font-weight: 600;
            transition: color 0.2s ease;
        }
        /* [V3] ì¹­ì°¬ ê°•ì¡° ì•„ì´ì½˜ */
        .app-nav a i {
            font-size: 1.375rem; width: 28px;
        }
        .app-nav a.active { color: var(--primary-color); }
        .app-nav::after {
            content: ''; position: absolute; bottom: 0.5rem; left: 50%;
            transform: translateX(-50%); width: 134px; height: 5px;
            background: #444; border-radius: 5px;
        }
        /* ëª¨ë‹¬ ë° ì•Œë¦¼ ë°°ë„ˆ ìŠ¤íƒ€ì¼ */
        .modal-backdrop {
            position: fixed; inset: 0; display: none; align-items: center; justify-content: center;
            background: rgba(0,0,0,0.45); z-index: 50; padding: 1rem;
        }
        .modal-backdrop.active { display: flex; }
        .modal {
            width: 100%; max-width: 520px; background: var(--card-bg); border-radius: 12px;
            padding: 1rem 1.25rem; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .modal .modal-header { font-weight: 800; margin-bottom: 0.5rem; }
        .modal .modal-actions { display:flex; gap:0.5rem; margin-top: 1rem; }
        .in-app-banner {
            position: absolute; left: 1.25rem; right: 1.25rem; top: 4.6rem;
            background: linear-gradient(90deg,#FDE68A,#FFEDD5); border:1px solid #F59E0B;
            padding: 0.75rem 1rem; border-radius: 0.75rem; display: none; z-index: 40;
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
        }
        .in-app-banner.active { display: block; }
        .in-app-banner .close-btn { float: right; cursor: pointer; font-weight: 700; }
    </style>
</head>
<body>

    <div class="mobile-mockup">

        <header class="app-header">
            <h1 id="page-title">í™ˆ</h1>
        </header>

        <main class="app-content">

            <section id="page-home" class="page active">
                <h2 class="welcome-header">ìµœì‹œìš° ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!</h2>
                <p class="welcome-sub">ì˜¤ëŠ˜ë„ í–‰ë³µí•œ í•˜ë£¨ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ğŸ¢</p>
                
                <div class="card praise-card">
                    <div class="card-header">
                        <i class="fa-solid fa-gift"></i>
                        <span>ìƒˆ ì¹­ì°¬ ë„ì°©!</span>
                    </div>
                    <p class="highlight"><strong>ê¹€*ìˆ˜ ê³ ê°ë‹˜</strong>ì´<br>ìµœì‹œìš° ë‹˜ì˜ ì¹œì ˆí•¨ì— ê°ë™í–ˆìŠµë‹ˆë‹¤!</p>
                    <a href="#" class="card-link" data-target="#page-growth">
                        ìì„¸íˆ í™•ì¸í•˜ê¸° &rarr;
                    </a>
                </div>

                <div class="card">
                    <div class="card-header">
                        <i class="fa-solid fa-calendar-day"></i>
                        <span>ì˜¤ëŠ˜ì˜ ìŠ¤ì¼€ì¤„</span>
                    </div>
                    <p><strong>ë‹¤ìŒ ê·¼ë¬´:</strong> 14:00 ~ 16:00 (TìµìŠ¤í”„ë ˆìŠ¤)</p>
                    <a href="#" class="card-link" data-target="#page-schedule">
                        ì „ì²´ ìŠ¤ì¼€ì¤„ ë³´ê¸° &rarr;
                    </a>
                </div>

                <div class="card alert-card">
                    <div class="card-header">
                        <i class="fa-solid fa-triangle-exclamation"></i>
                        <span>ê¸´ê¸‰ ì•ˆì „ ê³µì§€</span>
                    </div>
                    <p>ê¸ˆì¼ 15ì‹œë¶€í„° í­ìš° ì˜ˆë³´ë¡œ ì•¼ì™¸ ì–´íŠ¸ë™ì…˜ ìš´í–‰ì´ ì ì • ì¤‘ë‹¨ë©ë‹ˆë‹¤.</p>
                </div>
            </section>

            <section id="page-schedule" class="page">
                <div class="card">
                    <div class="card-header">
                        <i class="fa-solid fa-clock"></i>
                        <span>ì˜¤ëŠ˜ì˜ íƒ€ì„ë¼ì¸</span>
                    </div>
                    <ul class="schedule-list">
                        <li class="schedule-item">
                            <span class="time">10:00 - 14:00</span>
                            <span class="task">ì•„ë§ˆì¡´ ìµìŠ¤í”„ë ˆìŠ¤ <span class="location">(ì£¼í† í”¼ì•„)</span></span>
                        </li>
                        <li class="schedule-item">
                            <span class="time">14:00 - 15:00</span>
                            <span class="task break"><i class="fa-solid fa-mug-saucer"></i> íœ´ì‹ ì‹œê°„</span>
                        </li>
                        <li class="schedule-item">
                            <span class="time">15:00 - 18:00</span>
                            <span class="task">ì‚¬íŒŒë¦¬ íŠ¸ë¨ ìš´ì „ <span class="location">(ì£¼í† í”¼ì•„)</span></span>
                        </li>
                    </ul>
                </div>
                <div class="card">
                    <div class="card-header">
                        <i class="fa-solid fa-right-left"></i>
                        <span>ê·¼ë¬´ ê´€ë¦¬</span>
                    </div>
                    <a href="#" class="btn">êµëŒ€ ì‹ ì²­í•˜ê¸°</a>
                    <a href="#" class="btn btn-secondary">íœ´ë¬´ ì‹ ì²­í•˜ê¸°</a>
                </div>
            </section>

            <section id="page-growth" class="page">
                
                <div class="card star-tracker">
                    <div class="star-level">3-Star</div>
                    <div class="stars">
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-regular fa-star"></i>
                        <i class="fa-regular fa-star"></i>
                        <i class="fa-regular fa-star"></i>
                        <i class="fa-regular fa-star"></i>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-bar-inner"></div>
                    </div>
                    <div class="star-progress">
                        ë‹¤ìŒ 4-Starê¹Œì§€ ì¹­ì°¬ <strong>5ê°œ</strong> ì¤‘ <strong>3ê°œ</strong> ë‹¬ì„±!
                    </div>
                </div>

                <div class="card praise-log">
                    <div class="card-header">
                        <i class="fa-solid fa-inbox"></i>
                        <span>ì¹­ì°¬ ë©”ì¼í•¨ (3)</span>
                    </div>
                    <div style="display:flex; gap:0.5rem; margin-bottom:0.75rem;">
                        <button id="open-shout" class="btn btn-secondary" style="flex:1;">ìƒ¤ë¼ì›ƒ ë³´ë‚´ê¸°</button>
                        <button id="open-req" class="btn" style="flex:1;">ë³‘ê°€/êµëŒ€ ìš”ì²­</button>
                    </div>
                    <div class="praise-item">
                        <div class="icon customer"><i class="fa-solid fa-user-check"></i></div>
                        <div class="content">
                            <div class="header">
                                <span class="name">ê¹€*ìˆ˜ ê³ ê°ë‹˜</span>
                                <span class="date">2ì‹œê°„ ì „</span>
                            </div>
                            <p class="message">"ë¹„ ì˜¤ëŠ”ë°ë„ ì›ƒìœ¼ë©° ì•ˆë‚´í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!"</p>
                        </div>
                    </div>
                    <div class="praise-item">
                        <div class="icon colleague"><i class="fa-solid fa-users"></i></div>
                        <div class="content">
                            <div class="header">
                                <span class="name">ì´*ì˜ ìºìŠ¤íŠ¸ (ë™ë£Œ ì¹­ì°¬)</span>
                                <span class="date">1ì¼ ì „</span>
                            </div>
                            <p class="message">"ì˜¤ëŠ˜ êµëŒ€ ê·¼ë¬´ ë„ì™€ì£¼ì…”ì„œ ì •ë§ ê³ ë§ˆì› ì–´ìš”!"</p>
                        </div>
                    </div>
                    <div class="praise-item">
                        <div class="icon customer"><i class="fa-solid fa-user-check"></i></div>
                        <div class="content">
                            <div class="header">
                                <span class="name">ë°•*ì§„ ê³ ê°ë‹˜</span>
                                <span class="date">3ì¼ ì „</span>
                            </div>
                            <p class="message">"ì•„ì´ ëˆˆë†’ì´ì— ë§ì¶° ì›ƒì–´ì£¼ì…”ì„œ ê°ë™ë°›ì•˜ìŠµë‹ˆë‹¤."</D>
                        </div>
                    </div>
                </div>
            </section>

            <section id="page-manual" class="page">
                
                <input type="search" class="search-bar" placeholder="ğŸ” ë§¤ë‰´ì–¼ ê²€ìƒ‰ (ì˜ˆ: TìµìŠ¤í”„ë ˆìŠ¤, RPM)">

                <div class="card">
                    <div class="card-header">
                        <i class="fa-solid fa-layer-group"></i>
                        <span>ì£¼ìš” ì¹´í…Œê³ ë¦¬</span>
                    </div>
                    <div class="category-grid">
                        <a href="#" class="category-item"><i class="fa-solid fa-bolt"></i>ëŒë°œ ìƒí™©</a>
                        <a href="#" class="category-item"><i class="fa-solid fa-car-burst"></i>ì–´íŠ¸ë™ì…˜</a>
                        <a href="#" class="category-item"><i class="fa-solid fa-hand-holding-heart"></i>ì‘ëŒ€ ë©˜íŠ¸</a>
                        <a href="#" class="category-item"><i class="fa-solid fa-cloud-sun-rain"></i>ë‚ ì”¨/í™˜ê²½</a>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <i class="fa-solid fa-lightbulb" style="color: #F59E0B;"></i>
                        <span>Cast's Tip: í˜„ì¥ ë…¸íŠ¸</span>
                    </div>
                    <p>
                        <strong>"ìˆ˜ë¥™ì–‘ìš©ì°¨ RPM ë°” ì´íƒˆ ì‹œ ëŒ€ì‘ë²•"</strong>
                        <br>
                        "ê³¼ê±° ìš´í–‰ ì¤‘ RPM ë°”ê°€ ë¹ ì§€ëŠ” ëŒë°œ ìƒí™©ì—ì„œ...
                        ì´ì²˜ëŸ¼ ì‹¤ì œ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì•ˆì „ íŒì„ ì—¬ê¸°ì— ì•„ì¹´ì´ë¹™í•©ë‹ˆë‹¤."
                    </p>
                </div>
            </section>

            <section id="page-alerts" class="page">
                <div class="card">
                    <div class="card-header">
                        <i class="fa-solid fa-bell"></i>
                        <span>ì•Œë¦¼ ì„¼í„°</span>
                    </div>
                    <p>í˜„ì¬ í™œì„± ì•Œë¦¼(ë¯¸ì•„, ê¸´ê¸‰ ê³µì§€ ë“±)ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
                    <div id="alerts-list"></div>
                    <div style="margin-top:1rem; display:flex; gap:0.5rem;">
                        <button id="btn-simulate-missing" class="btn btn-secondary">ë¯¸ì•„ ì•Œë¦¼ ì‹œë®¬ë ˆì´ì…˜</button>
                        <button id="btn-clear-alerts" class="btn">ëª¨ë“  ì•Œë¦¼ ì§€ìš°ê¸°</button>
                    </div>
                </div>
            </section>

        </main>

        <nav class="app-nav">
            <a href="#page-home" class="nav-link active" data-title="í™ˆ">
                <i class="fa-solid fa-house-chimney"></i>
                <span>í™ˆ</span>
            </a>
            <a href="#page-schedule" class="nav-link" data-title="ìŠ¤ì¼€ì¤„">
                <i class="fa-solid fa-calendar-days"></i>
                <span>ìŠ¤ì¼€ì¤„</span>
            </a>
            <a href="#page-alerts" class="nav-link" data-title="ì•Œë¦¼">
                <i class="fa-solid fa-bell"></i>
                <span>ì•Œë¦¼</span>
            </a>
            <a href="#page-growth" class="nav-link" data-title="ë‚˜ì˜ ì„±ì¥">
                <i class="fa-solid fa-award"></i> <span>ì„±ì¥</span>
            </a>
            <a href="#page-manual" class="nav-link" data-title="ë§¤ë‰´ì–¼">
                <i class="fa-solid fa-book-bookmark"></i>
                <span>ë§¤ë‰´ì–¼</span>
            </a>
        </nav>

        <!-- ì¸-ì•± ë°°ë„ˆ (ë¯¸ì•„ ë“± ê¸´ê¸‰ ì•Œë¦¼) -->
        <div id="inAppBanner" class="in-app-banner" role="status">
            <span id="banner-text"></span>
            <span class="close-btn" id="banner-close">Ã—</span>
        </div>

        <!-- ëª¨ë‹¬: ìƒ¤ë¼ì›ƒ(ë™ë£Œ ì¹­ì°¬) -->
        <div id="modal-backdrop" class="modal-backdrop" aria-hidden="true">
            <div class="modal" role="dialog" aria-modal="true">
                <div class="modal-header">ìƒ¤ë¼ì›ƒ ë³´ë‚´ê¸° (ë™ë£Œ ì¹­ì°¬)</div>
                <div>
                    <label>ë°›ëŠ”ì‚¬ëŒ ì´ë¦„
                        <input id="shout-to" style="width:100%; padding:0.5rem; margin-top:0.35rem;" placeholder="ì˜ˆ: ì´*ì˜" />
                    </label>
                    <label style="display:block; margin-top:0.5rem;">ë©”ì‹œì§€
                        <textarea id="shout-message" rows="3" style="width:100%; padding:0.5rem; margin-top:0.35rem;" placeholder="ì¹­ì°¬ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                    </label>
                </div>
                <div class="modal-actions">
                    <button id="shout-send" class="btn">ì „ì†¡</button>
                    <button id="shout-cancel" class="btn btn-secondary">ì·¨ì†Œ</button>
                </div>
            </div>
        </div>

        <!-- ëª¨ë‹¬: ë³‘ê°€/êµëŒ€ ìš”ì²­(ê°„ë‹¨í•œ ë²„ì „) -->
        <div id="modal-request" class="modal-backdrop" aria-hidden="true">
            <div class="modal" role="dialog" aria-modal="true">
                <div class="modal-header">ìš”ì²­ ì œì¶œ (ë³‘ê°€/êµëŒ€)</div>
                <div>
                    <label>íƒ€ì…
                        <select id="req-type" style="width:100%; padding:0.5rem; margin-top:0.35rem;">
                            <option value="sick">ë³‘ê°€</option>
                            <option value="swap">êµëŒ€ ìš”ì²­</option>
                        </select>
                    </label>
                    <label style="display:block; margin-top:0.5rem;">ë‚´ìš©
                        <textarea id="req-message" rows="3" style="width:100%; padding:0.5rem; margin-top:0.35rem;" placeholder="ê°„ë‹¨í•œ ì‚¬ìœ  ë˜ëŠ” ìš”ì²­ ì‚¬í•­"></textarea>
                    </label>
                </div>
                <div class="modal-actions">
                    <button id="req-send" class="btn">ì œì¶œ</button>
                    <button id="req-cancel" class="btn btn-secondary">ì·¨ì†Œ</button>
                </div>
            </div>
        </div>

    </div>

    <script>
        /* íƒ­ ì „í™˜ ë° í—¤ë” ì œëª© ë³€ê²½ + ì¶”ê°€ ê¸°ëŠ¥ (ìƒ¤ë¼ì›ƒ, ì•Œë¦¼, ë³‘ê°€/êµëŒ€, ì„œë¹„ìŠ¤ìŠ¤íƒ€ ì—°ë™ - ë¡œì»¬ ì‹œë®¬ë ˆì´ì…˜) */

        const navLinks = document.querySelectorAll('.nav-link');
        const pages = document.querySelectorAll('.page');
        const pageTitle = document.getElementById('page-title');
        const appContent = document.querySelector('.app-content');

        function handleNavClick(event) {
            event.preventDefault();
            const link = event.currentTarget;
            const targetId = link.getAttribute('href');
            const targetPage = document.querySelector(targetId);
            if (!targetPage || link.classList.contains('active')) return;
            navLinks.forEach(nav => nav.classList.remove('active'));
            pages.forEach(page => page.classList.remove('active'));
            link.classList.add('active');
            targetPage.classList.add('active');
            pageTitle.textContent = link.dataset.title;
            appContent.scrollTop = 0;
            renderAlerts();
        }
        navLinks.forEach(link => link.addEventListener('click', handleNavClick));

        // ì¹´ë“œ ë‚´ë¶€ ë§í¬ ì´ë™ ì§€ì›
        document.querySelectorAll('.card-link[data-target], .btn[data-target]').forEach(button => {
            button.addEventListener('click', function(event) {
                event.preventDefault();
                const targetSelector = button.dataset.target;
                const targetLink = document.querySelector(`.nav-link[href="${targetSelector}"]`);
                if (targetLink) targetLink.click();
            });
        });

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤
        const LS_KEYS = {
            ALERTS: 'cast_alerts_v1',
            PRAISES: 'cast_praises_v1',
            REQUESTS: 'cast_requests_v1',
            PRAISE_COUNT: 'cast_praise_count_v1'
        };

        // -- In-app banner --
        const inAppBanner = document.getElementById('inAppBanner');
        const bannerText = document.getElementById('banner-text');
        const bannerClose = document.getElementById('banner-close');

        function showBanner(text) {
            bannerText.textContent = text;
            inAppBanner.classList.add('active');
        }
        function hideBanner() {
            inAppBanner.classList.remove('active');
        }
        bannerClose.addEventListener('click', hideBanner);

        // Alerts management
        function loadAlerts() {
            try { return JSON.parse(localStorage.getItem(LS_KEYS.ALERTS) || '[]'); } catch(e) { return []; }
        }
        function saveAlerts(list) { localStorage.setItem(LS_KEYS.ALERTS, JSON.stringify(list)); }

        function addAlert(alert) {
            const list = loadAlerts();
            list.unshift(alert);
            saveAlerts(list);
            renderAlerts();
            // show banner and try browser notification
            showBanner(alert.title + ' â€” ' + alert.message);
            if (Notification && Notification.permission === 'granted') {
                new Notification(alert.title, { body: alert.message });
            } else if (Notification && Notification.permission !== 'denied') {
                Notification.requestPermission().then(perm => {
                    if (perm === 'granted') new Notification(alert.title, { body: alert.message });
                }).catch(()=>{});
            }
        }

        function renderAlerts() {
            const el = document.getElementById('alerts-list');
            if (!el) return;
            const list = loadAlerts();
            if (!list.length) {
                el.innerHTML = '<p class="welcome-sub">í™œì„± ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            el.innerHTML = list.map(a => `
                <div class="card" style="margin-bottom:0.5rem;">
                    <div class="card-header"><i class="fa-solid fa-triangle-exclamation"></i><span>${a.title}</span></div>
                    <p style="margin:0.25rem 0 0.5rem;"><strong>${a.location||''}</strong> ${a.message}</p>
                    <small style="color:var(--light-text-color);">${new Date(a.ts).toLocaleString()}</small>
                </div>
            `).join('');
        }

        // ë²„íŠ¼: ì‹œë®¬ë ˆì´ì…˜ ë° í´ë¦¬ì–´
        const btnSimMissing = document.getElementById('btn-simulate-missing');
        const btnClearAlerts = document.getElementById('btn-clear-alerts');
        if (btnSimMissing) btnSimMissing.addEventListener('click', () => {
            const alert = { type: 'missing', title: 'ë¯¸ì•„ ë°œìƒ', message: 'ì–´ë¦°ì´(í‚¤ 100cm ì¶”ì •) ë¶„ì‹¤. ë†€ì´ë™ì‚° ë¶ë¬¸ ìª½ì—ì„œ ë§ˆì§€ë§‰ í™•ì¸.', location: 'ì£¼í† í”¼ì•„ ë¶ë¬¸', ts: Date.now() };
            addAlert(alert);
        });
        if (btnClearAlerts) btnClearAlerts.addEventListener('click', () => { saveAlerts([]); renderAlerts(); hideBanner(); });

        // -- ìƒ¤ë¼ì›ƒ (ë™ë£Œ ì¹­ì°¬) --
        const modalBackdrop = document.getElementById('modal-backdrop');
        const openShoutBtn = document.getElementById('open-shout');
        const shoutCancel = document.getElementById('shout-cancel');
        const shoutSend = document.getElementById('shout-send');
        const shoutTo = document.getElementById('shout-to');
        const shoutMessage = document.getElementById('shout-message');

        function openShout() { modalBackdrop.classList.add('active'); modalBackdrop.setAttribute('aria-hidden','false'); shoutTo.focus(); }
        function closeShout() { modalBackdrop.classList.remove('active'); modalBackdrop.setAttribute('aria-hidden','true'); shoutTo.value=''; shoutMessage.value=''; }
        if (openShoutBtn) openShoutBtn.addEventListener('click', openShout);
        if (shoutCancel) shoutCancel.addEventListener('click', closeShout);

        function loadPraises() { try { return JSON.parse(localStorage.getItem(LS_KEYS.PRAISES) || '[]'); } catch(e) { return []; } }
        function savePraises(list) { localStorage.setItem(LS_KEYS.PRAISES, JSON.stringify(list)); }

        shoutSend.addEventListener('click', () => {
            const to = shoutTo.value.trim() || 'ìµëª…';
            const msg = shoutMessage.value.trim() || 'ì˜í–ˆì–´ìš”!';
            const entry = { from: 'ë‚˜', to, message: msg, ts: Date.now(), source: 'peer' };
            const list = loadPraises(); list.unshift(entry); savePraises(list);
            // increment praise count for recipient (simple global counter for demo)
            const counts = JSON.parse(localStorage.getItem(LS_KEYS.PRAISE_COUNT) || '{}');
            counts[to] = (counts[to]||0) + 1; localStorage.setItem(LS_KEYS.PRAISE_COUNT, JSON.stringify(counts));
            closeShout(); renderPraises(); updateStarTracker();
            showBanner(to + 'ë‹˜ì—ê²Œ ìƒ¤ë¼ì›ƒì„ ë³´ëƒˆìŠµë‹ˆë‹¤.');
        });

        function renderPraises() {
            const container = document.querySelector('.praise-log');
            if (!container) return;
            const list = loadPraises();
            const itemsHtml = list.slice(0,20).map(p => `
                <div class="praise-item">
                    <div class="icon ${p.source==='peer'?'colleague':'customer'}"><i class="fa-solid fa-users"></i></div>
                    <div class="content">
                        <div class="header"><span class="name">${p.to}</span><span class="date">${new Date(p.ts).toLocaleString()}</span></div>
                        <p class="message">${p.message}</p>
                    </div>
                </div>
            `).join('');
            // replace only the items (find existing .praise-item parent)
            const existingItems = container.querySelectorAll('.praise-item');
            if (existingItems.length) {
                // remove old items
                existingItems.forEach(n => n.remove());
                // insert new items at end of card
                container.insertAdjacentHTML('beforeend', itemsHtml);
            }
        }

        // -- ë³‘ê°€/êµëŒ€ ìš”ì²­ ëª¨ë‹¬ --
        const modalRequest = document.getElementById('modal-request');
        const openReqBtn = document.getElementById('open-req');
        const reqCancel = document.getElementById('req-cancel');
        const reqSend = document.getElementById('req-send');
        const reqType = document.getElementById('req-type');
        const reqMessage = document.getElementById('req-message');

        if (openReqBtn) openReqBtn.addEventListener('click', () => { modalRequest.classList.add('active'); modalRequest.setAttribute('aria-hidden','false'); reqMessage.focus(); });
        if (reqCancel) reqCancel.addEventListener('click', () => { modalRequest.classList.remove('active'); modalRequest.setAttribute('aria-hidden','true'); });
        if (reqSend) reqSend.addEventListener('click', () => {
            const r = { type: reqType.value, message: reqMessage.value, ts: Date.now(), from: 'ë‚˜' };
            const list = JSON.parse(localStorage.getItem(LS_KEYS.REQUESTS) || '[]'); list.unshift(r); localStorage.setItem(LS_KEYS.REQUESTS, JSON.stringify(list));
            modalRequest.classList.remove('active'); modalRequest.setAttribute('aria-hidden','true'); reqMessage.value = '';
            showBanner((r.type==='sick'?'ë³‘ê°€':'êµëŒ€') + ' ìš”ì²­ì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤.');
        });

        // ì„œë¹„ìŠ¤ìŠ¤íƒ€ - ê°„ë‹¨í•œ ìŠ¤íƒ€ íŠ¸ë˜ì»¤ ì—…ë°ì´íŠ¸ (ë¡œì»¬ ì¹´ìš´íŠ¸ ê¸°ë°˜)
        function updateStarTracker() {
            // For demo: show counts for "ë‚˜" from PRAISE_COUNT
            const counts = JSON.parse(localStorage.getItem(LS_KEYS.PRAISE_COUNT) || '{}');
            const myCount = counts['ë‚˜'] || counts['ìµœì‹œìš°'] || 3; // fallback sample
            const needed = 5; const current = myCount % needed; const stars = Math.floor(myCount / needed) + 1;
            const progress = Math.min(100, Math.round((current/needed)*100));
            const bar = document.querySelector('.progress-bar-inner'); if (bar) bar.style.width = progress + '%';
            const starLevel = document.querySelector('.star-level'); if (starLevel) starLevel.textContent = Math.max(1, stars) + '-Star ìº¡í‹´';
            const starProgress = document.querySelector('.star-progress'); if (starProgress) starProgress.innerHTML = `ë‹¤ìŒ ${stars+1}-Starê¹Œì§€ ì¹­ì°¬ <strong>${needed}</strong> ì¤‘ <strong>${current}</strong> ë‹¬ì„±!`;
        }

        // ì´ˆê¸°í™”
        function init() {
            renderPraises(); updateStarTracker(); renderAlerts();
            // wire up open shout via long-press on praise card as fallback
            const praiseCard = document.querySelector('.praise-card'); if (praiseCard) praiseCard.addEventListener('dblclick', openShout);
        }

        // on load
        document.addEventListener('DOMContentLoaded', init);

    </script>

</body>
</html>